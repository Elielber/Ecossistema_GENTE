<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistente GENTE - Ecossistema</title>
    <link rel="icon" type="image/png" href="data:image/png;base64,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">
    <style>
        :root {
            --fundo: #E0E0E0;
            --borda: #4A4A4A;
            --texto: #4A4A4A;
            --azul: #1D3557;   /* Alta Gest√£o / ANP / CRITER */
            --vermelho: #8C1F28; /* Conflito / FORENSE / PLAYS */
            --marrom: #7A4B29;  /* Pessoas / PEIXE VOADOR */
            --verde: #2A574A;   /* Resultado / PLAN */
            --arcos: #787878;
        }

        body {
            background-color: var(--fundo);
            font-family: 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            color: var(--texto);
        }

        /* Container de Telas */
        .viewport {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            padding-bottom: 80px; /* Espa√ßo para a nav */
        }

        .tela-container { display: none; max-width: 900px; margin: 0 auto; }
        .active-tela { display: block; animation: fadeIn 0.3s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        header.view-header {
            border-bottom: 2px solid var(--borda);
            margin-bottom: 25px;
            padding-bottom: 10px;
        }

        h2 { margin: 0; text-transform: uppercase; letter-spacing: 1px; font-size: 1.2rem; }
        p.subtitle { margin: 5px 0 0; font-size: 0.85rem; color: var(--arcos); }

        /* --- ESTILOS TELA 1: NEXO --- */
        .nexo-layout { display: flex; flex-direction: column; align-items: center; }
        .radar-box { background: #f5f5f5; border-radius: 50%; padding: 20px; margin-bottom: 20px; box-shadow: inset 0 2px 10px rgba(0,0,0,0.05); }
        .fluxo-lista { width: 100%; display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .item-fluxo { 
            background: white; padding: 10px; border-radius: 4px; display: flex; align-items: center; gap: 10px; 
            border: 1px solid #ccc; font-size: 0.8rem;
        }
        .item-fluxo.completo { border-left: 4px solid var(--verde); }
        .item-fluxo.pendente { border-left: 4px solid var(--arcos); opacity: 0.6; }
        .dot { width: 10px; height: 10px; border-radius: 50%; }

        /* --- ESTILOS TELA 2: MATURIDADE --- */
        .chart-line-placeholder { 
            height: 150px; background: white; border-radius: 8px; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: center; border: 1px dashed var(--arcos);
        }
        .badges-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .badge-item { 
            background: white; padding: 15px; border-radius: 8px; text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .badge-icon { font-size: 2rem; margin-bottom: 10px; }
        .badge-item.locked { opacity: 0.4; filter: grayscale(1); }

        /* --- ESTILOS TELA 3: ESTRAT√âGIA --- */
        .health-meters { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .meter-group { margin-bottom: 15px; }
        .meter-group label { font-size: 0.75rem; font-weight: bold; display: block; margin-bottom: 5px; }
        .progress-bar { height: 10px; background: #eee; border-radius: 5px; overflow: hidden; }
        .fill { height: 100%; transition: width 0.5s; }
        .alerta-conselho { background: var(--azul); color: white; padding: 15px; border-radius: 8px; font-size: 0.85rem; }

        /* --- NAVEGA√á√ÉO INFERIOR --- */
        .nav-tabs {
            position: fixed; bottom: 0; width: 100%; height: 65px;
            background: var(--borda); display: flex; justify-content: space-around;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.2);
        }
        .tab-item {
            flex: 1; display: flex; flex-direction: column; align-items: center;
            justify-content: center; color: #aaa; cursor: pointer; border: none; background: none;
            transition: 0.2s;
        }
        .tab-item.active { color: white; background: #333; border-top: 3px solid var(--azul); }
        .tab-icon { font-size: 1.2rem; margin-bottom: 4px; }
        .tab-label { font-size: 0.65rem; font-weight: bold; text-transform: uppercase; }

        .btn-main {
            background: var(--borda); color: white; border: none; padding: 12px 20px;
            border-radius: 4px; cursor: pointer; width: 100%; margin-top: 20px; font-weight: bold;
        }
        /* Estilos do Explorador de Rede Profissional */
    .explorer-container {
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        min-height: 400px;
        background: var(--fundo);
    }

    /* Item de M√≥dulo (N√≠vel 1) */
    .module-wrapper { border-bottom: 1px solid #eee; }
    
    .module-header {
        display: flex;
        align-items: center;
        padding: 20px 15px;
        background: var(--fundo);
        cursor: pointer;
        font-weight: bold;
        color: var(--borda);
    }

    .module-header:hover { }

    /* √çcone de Rede S√≥brio */
    .network-node-icon {
        margin-right: 12px;
        font-size: 1.2rem;
        color: var(--arcos);
    }

    /* Sub-n√≠vel: Ferramentas (N√≠vel 2) */
    .tools-container {
        display: none;
        padding-left: 25px;
        background: var(--fundo);
    }
    .tools-container.open { display: block; }

    .tool-header {
        display: flex;
        align-items: center;
        padding: 10px 15px;
        cursor: pointer;
        border-bottom: 1px solid #f0f0f0;
    }
    .tool-header:hover {  }

    /* N√≠vel 3: Arquivos JSON */
    .files-container {
        display: none;
        padding-left: 35px;
        
    }
    .files-container.open { display: block; }

    .file-row {
        padding: 8px 15px;
        font-size: 0.8rem;
        color: var(--azul);
        border-bottom: 1px solid #f9f9f9;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
    }
    .file-row:hover { background: #eef4ff; font-weight: bold; }

    /* Indicador de Expans√£o (Seta) */
    .arrow {
        display: inline-block;
        width: 15px;
        font-size: 0.7rem;
        transition: transform 0.2s;
        color: #bbb;
    }
    .open > .arrow { transform: rotate(90deg); }
    
    </style>
</head>
<body>

<div class="viewport">
    
    <div id="tela-nexo" class="tela-container active-tela">
    <header class="view-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h2>Nexo de Integra√ß√£o</h2>
                <p class="subtitle" id="stats-topo">Explorador de Rede: 5 M√≥dulos Conectados</p>
            </div>
            <button class="btn-sync-small" onclick="atualizarDiretorio()">Atualizar diret√≥rio</button></button>
        </div>
    </header>
    
    <div class="explorer-container">
        <div class="address-bar" id="address-bar">
            Rede_GENTE \ Estrat√©gia_Integrada
        </div>

        <div id="explorer-content">
            </div>
    </div>

    <div class="nexo-summary-card">
        <p><strong>Status do Ecossistema:</strong> Monitorando ativos de intelig√™ncia nos 5 m√≥dulos de gest√£o.</p>
    </div>
</div>


    <div id="tela-maturidade" class="tela-container">
        <header class="view-header">
            <h2>Evolu√ß√£o Gerencial</h2>
            <p class="subtitle">Andaime Digital e Maturidade Reflexiva</p>
        </header>

        <div class="chart-line-placeholder">
            <p style="color:#787878; font-size: 0.8rem;">Gr√°fico de Tend√™ncia: Lucidez vs Consist√™ncia</p>
        </div>

        <div class="badges-container">
            <div class="badge-item">
                <div class="badge-icon">üõ°Ô∏è</div>
                <span class="tab-label">L√≥gica Blindada</span>
            </div>
            <div class="badge-item locked">
                <div class="badge-icon">ü§ù</div>
                <span class="tab-label">Equil√≠brio Nash</span>
            </div>
        </div>
    </div>

    <div id="tela-estrategia" class="tela-container">
        <header class="view-header">
            <h2>Consist√™ncia da Estrat√©gia</h2>
            <p class="subtitle">Sa√∫de do Plano de Neg√≥cio</p>
        </header>

        <div class="health-meters">
            <div class="meter-group">
                <label>Resili√™ncia a Conflitos (Forense)</label>
                <div class="progress-bar"><div class="fill" style="width: 75%; background: var(--vermelho);"></div></div>
            </div>
            <div class="meter-group">
                <label>Consist√™ncia de Decis√£o (ANP)</label>
                <div class="progress-bar"><div class="fill" style="width: 92%; background: var(--azul);"></div></div>
            </div>
            <div class="meter-group">
                <label>Viabilidade de Coopera√ß√£o (PLAYS)</label>
                <div class="progress-bar"><div class="fill" style="width: 30%; background: var(--verde);"></div></div>
            </div>
        </div>

        <div class="alerta-conselho">
            <strong>PARECER GENTE:</strong> Seu plano tem alta base l√≥gica, mas a viabilidade de coopera√ß√£o entre atores ainda √© baixa. Refine o PLAYS.
        </div>
    </div>

</div>

<nav class="nav-tabs">
    <button class="tab-item active" onclick="mudarTela('tela-nexo', this)">
        <span class="tab-icon">üîÑ</span>
        <span class="tab-label">Nexo</span>
    </button>
    <button class="tab-item" onclick="mudarTela('tela-maturidade', this)">
        <span class="tab-icon">üìà</span>
        <span class="tab-label">Maturidade</span>
    </button>
    <button class="tab-item" onclick="mudarTela('tela-estrategia', this)">
        <span class="tab-icon">üß¨</span>
        <span class="tab-label">Estrat√©gia</span>
    </button>
</nav>

<script>
       // 1. DADOS ESTRUTURADOS DO ECOSSISTEMA
    const ecossistemaRede = [
        {
            modulo: "1. Planejamento Estrat√©gico √Ågil",
            id: "m1",
            ferramentas: [
                { nome: "GENTE Forense", cor: "var(--vermelho)", arquivos: [] },
                { nome: "Peixe-Voador", cor: "var(--marrom)", arquivos: [] },
                { nome: "CRITER", cor: "var(--azul)", arquivos: [] },
                { nome: "ANP-Solver", cor: "var(--azul)", arquivos: [] },
                { nome: "PLAN", cor: "var(--verde)", arquivos: [] },
                { nome: "PLAYS", cor: "var(--vermelho)", arquivos: [] }
            ]
        },
        // M√≥dulos subsequentes seguem a mesma l√≥gica de mapeamento
        { modulo: "2. T√°ticas de Controle", id: "m2", ferramentas: [{ nome: "MOM", cor: "var(--azul)", arquivos: [] }, { nome: "PN", cor: "var(--azul)", arquivos: [] }] },
        { modulo: "3. Gest√£o de Tarefas", id: "m3", ferramentas: [{ nome: "GET Pessoas", cor: "var(--marrom)", arquivos: [] }, { nome: "GET Processos", cor: "var(--marrom)", arquivos: [] }] },
        { modulo: "4. Gest√£o de Desempenho", id: "m4", ferramentas: [{ nome: "RG", cor: "var(--verde)", arquivos: [] }] },
        { modulo: "5. Gest√£o Estrat√©gica", id: "m5", ferramentas: [{ nome: "Cockpit", cor: "var(--borda)", arquivos: [] }] }
    ];

  // 2. L√ìGICA DE VARREDURA RECURSIVA (Busca em todos os diret√≥rios selecionados)
async function atualizarDiretorio() {
    try {
        // O usu√°rio seleciona a pasta raiz (ex: documentos ou a pasta do projeto)
        const dirHandle = await window.showDirectoryPicker();
        
        // Limpa os dados atuais para nova classifica√ß√£o
        ecossistemaRede.forEach(m => m.ferramentas.forEach(f => f.arquivos = []));

        // Inicia a varredura recursiva a partir da raiz selecionada
        await varrerSubdiretorios(dirHandle);

        renderizarArvoreRede();
        alert("Varredura completa! O sistema mapeou todos os logs encontrados nas subpastas.");

    } catch (err) {
        if (err.name !== 'AbortError') {
            alert("Erro: Certifique-se de estar usando um navegador moderno (Chrome/Edge) e d√™ permiss√£o de leitura.");
        }
    }
}

// Fun√ß√£o Auxiliar Recursiva (O cora√ß√£o da varredura)
async function varrerSubdiretorios(directoryHandle) {
    for await (const entry of directoryHandle.values()) {
        if (entry.kind === 'file') {
            if (entry.name.endsWith('.json')) {
                classificarArquivo(entry.name);
            }
        } else if (entry.kind === 'directory') {
            // Se encontrar uma pasta, mergulha nela (Recursividade)
            const subDirHandle = await directoryHandle.getDirectoryHandle(entry.name);
            await varrerSubdiretorios(subDirHandle);
        }
    }
}


    // Classifica o arquivo baseando-se em palavras-chave no nome
    function classificarArquivo(fileName) {
        const nomeLower = fileName.toLowerCase();
        
        ecossistemaRede.forEach(modulo => {
            modulo.ferramentas.forEach(ferramenta => {
                const keyword = ferramenta.nome.split(' ')[0].toLowerCase();
                // Se o nome do arquivo contiver o nome da ferramenta (ex: "forense_v1.json")
                if (nomeLower.includes(keyword)) {
                    ferramenta.arquivos.push(fileName);
                }
            });
        });
    }

    // 3. FUN√á√ïES DE RENDERIZA√á√ÉO (√ÅRVORE)
    function renderizarArvoreRede() {
        const container = document.getElementById('explorer-content');
        container.innerHTML = "";

        ecossistemaRede.forEach(m => {
            let toolsHtml = m.ferramentas.map(f => {
                let filesHtml = f.arquivos.map(arq => `
                    <div class="file-row" onclick="event.stopPropagation(); alert('Processando: ${arq}')">
                        <span>üìÑ ${arq}</span>
                        <span style="font-size:0.7rem; color:#aaa;">JSON Log</span>
                    </div>
                `).join('');

                return `
                    <div class="tool-wrapper">
                        <div class="tool-header" onclick="event.stopPropagation(); toggleElement('files-${f.nome.replace(/\s/g, '')}', this)">
                            <span class="arrow">‚ñ∂</span>
                            <span style="margin-right:8px;">üìÇ</span>
                            <span style="font-size:0.85rem; color:${f.cor}; font-weight:500;">${f.nome}</span>
                        </div>
                        <div id="files-${f.nome.replace(/\s/g, '')}" class="files-container">
                            ${filesHtml || '<div style="padding:8px 15px; color:#ccc; font-size:0.7rem;">Vazio</div>'}
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML += `
                <div class="module-wrapper">
                    <div class="module-header" onclick="toggleElement('tools-${m.id}', this)">
                        <span class="arrow">‚ñ∂</span>
                        <span class="network-node-icon">üñ•Ô∏è</span>
                        <span class="module-name">${m.modulo}</span>
                    </div>
                    <div id="tools-${m.id}" class="tools-container">
                        ${toolsHtml}
                    </div>
                </div>
            `;
        });
    }

    function toggleElement(id, el) {
        const target = document.getElementById(id);
        target.classList.toggle('open');
        el.classList.toggle('open');
    }

    function mudarTela(telaId, btn) {
        document.querySelectorAll('.tela-container').forEach(t => t.classList.remove('active-tela'));
        document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
        document.getElementById(telaId).classList.add('active-tela');
        btn.classList.add('active');
    }

    window.onload = renderizarArvoreRede;
</script>

</body>
</html>
